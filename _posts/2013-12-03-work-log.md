---
layout: post
title: "Work Log"
description: ""
category: 'Work Log'
tags: []
meta: 
    "SVN Revision": 15864
---
{% include JB/setup %}
{% include research/tulips_da3_meta %}


Fixed change-of-variable transformation for Hessian.  OPtimization now finishes with fewer iterations and with higher likelihood solution.

Still getting weird overshoot curves:
    

It seems that our optimization occasionally causes large DC offset compared to the unoptimized indices.  See below, blue is original, green is optimized.  

![]({{site.baseurl}}/img/2013-12-03-updated_indices_1.png)

On the other hand, some indices are much improved.  Here's our always problematic curve #10, see how the large gap after the first two indices is removed.

![]({{site.baseurl}}/img/2013-12-03-updated_indices_2.png)

The DC offset issue raises two questions: (1) why isn't offset of zero preferred, and (2) why does DC offset result in overshooting?

I think I know the answer to (2): we always start reconstructions at index zero.  So if the evidence starts at index 10, 

---

Cached prior K is used in gradient computation; cache isn't updated when indices change.

...

On second look, I was wrong, cached K is updated in a call to `att_set_start_index_2`

I'll probably need to update children branch indices when parent indices change.  Or only do index optimization in isolation.


---

Why is DC offset preferred?  It's not an inference problem; confirmed that zero-offset indeed has a lower ML (not by much though).

It's clear that the curve is beneficting from extra freedom gained by starting at a higher index.  The question is which parameter is encouraging this (smoothing, offset, rate)?

Lowering position variance below the optimal point reverses the trend, surprisingly.  Increasing perturb position variance helps, but doesn't reverse.

Increasing rate variance past the optimal point reverses the trend, but the effect is not dramatic.

Increasing smoothing variance far past optimal shows a dramatic trend reversal.

Increasing rate variance makes position variance behave naturally -- zero offset is better for all values of position variance, with peak difference near the optimal.  Correction: at very low position variance ( <= 5) the positive-offset model looks better, as we'd expect, since offset makes the model more forgiving.

Correction: increasing position variance is required for some curves.
---

Let's re-run with larger rate variance.

...

After increasing rate variance, indicies grow without bound!  Eventually they get into the range of 4e6.  Its our old friend, curve #10.  This is very surprising, because the marginal likelihood should strongly discourage such large indices, since the number of poor configufations grows with index magnitude.  

Could add a regulating factor, but it really seems like this shouldn't be necessary.  

All three terms grow with 
