---
layout: post
title: "FIRE - improving fitting"
description: ""
category: 'Work Log'
tags: []
meta: 
    "SVN Revision": "unknown (see text)"
---
{% include JB/setup %}
{% include research/fire_plm1_meta %}

Run: Refactoring kmeans, fixed bug
--------------
**Description**: Refactored k-means to make replicates easier to run.  Also fixed a bug in how collapsed clusters are handled.
**Results**:  

    BEFORE REPOPULATION FIX

        10 itns
        -----------
        training error: -3.61348
        test error: -4.60147

        15 itns
        ---------
        training error: -3.60094
        test error: -4.58815

        20 itns
        -----------
        training error: -3.60094
        test error: -4.58815

    AFTER REPOPULATION FIX

        10 itns
        ----------
        training error: -3.5833
        test error: -5.09241

        15 itns
        ----------
        training error: -3.58389
        test error: -5.093

        20 itns
        ----------
        training error: -3.58411
        test error: -5.09322


Fitting results using all data to train:
    
    num_clusters:3
    log weights: -4.57471 -2.00976 -0.15587
    cluster #1
      0.00000000e+00  0.00000000e+00
      0.00000000e+00  0.00000000e+00 -3.83364591e+01
      7.82019244e+04  0.00000000e+00  7.92951939e+04
     -3.42698918e-05 -1.56664007e-04 -1.44905406e-04 -4.27849306e-04  9.36991863e-04 -3.78348959e-04 -1.65392020e-04
      3.35299029e-01  1.35247998e+00  1.21211765e+00  3.62090531e+00  6.28886806e+00  8.63120843e+00  9.66089624e-01
    3.34889
    cluster #2
      0.00000000e+00  0.00000000e+00
      1.45514523e+01 -8.18180103e+00  1.81219087e+01
      7.42151829e+02  4.39570227e+03  1.11951378e+03
     -3.42698918e-05 -1.56664007e-04 -1.44905406e-04 -4.27849306e-04  9.36991863e-04 -3.78348959e-04 -1.65392020e-04
      3.35299029e-01  1.35247998e+00  1.21211765e+00  3.62090531e+00  6.28886806e+00  8.63120843e+00  9.66089624e-01
    3.34889
    cluster #3
      0.00000000e+00  0.00000000e+00
      1.27316133e+00  1.87105903e+00  7.12568703e-01
     -1.32745938e+03 -1.36974473e+03 -7.61984123e+02
     -3.42698918e-05 -1.56664007e-04 -1.44905406e-04 -4.27849306e-04  9.36991863e-04 -3.78348959e-04 -1.65392020e-04
      3.35299029e-01  1.35247998e+00  1.21211765e+00  3.62090531e+00  6.28886806e+00  8.63120843e+00  9.66089624e-01
    3.34889

**Discussion**: 

Neither of these results match what I was getting on Friday.  Testing error in particular is worse.  Did I break something?

Found it:  error in evaluation code arising from bad copy/paste.

Another issue:  should be using centered_data.txt, not data.txt.   

